[gd_scene load_steps=4 format=3 uid="uid://dl7u18o05nqrr"]

[ext_resource type="PackedScene" uid="uid://dfwjonxtr6eox" path="res://Gameplay/HUD/hud.tscn" id="1_xd0f3"]

[sub_resource type="Shader" id="Shader_t2nh1"]
code = "shader_type canvas_item;

uniform float curvature = 2.0;

void fragment() {
	vec2 centered_uv = SCREEN_UV * 2.0 - 1.0;
	vec2 uv_offset = centered_uv.yx / curvature;
	vec2 warped_uv = centered_uv - centered_uv * uv_offset * uv_offset;
	COLOR = texture(TEXTURE, (warped_uv + 1.0) / 2.0);
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rbxnt"]
shader = SubResource("Shader_t2nh1")
shader_parameter/curvature = 4.0

[node name="SubViewportContainer" type="SubViewportContainer"]
material = SubResource("ShaderMaterial_rbxnt")
custom_minimum_size = Vector2(1920, 1080)
layout_direction = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -266.0
offset_top = -321.0
offset_right = 502.0
offset_bottom = 111.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="."]
handle_input_locally = false
size = Vector2i(2688, 1512)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Visor" parent="SubViewport" instance=ExtResource("1_xd0f3")]
